---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Navigation from "../../components/Navigation.astro";
import ProjectCard from "../../components/ProjectCard.astro";
import Footer from "../../components/Footer.astro";
import { getCollection } from "astro:content";
import { useTranslations } from "../../i18n/utils";

const t = useTranslations("id");

// Get all Indonesian projects
const allProjects = await getCollection("projects", ({ data }) => {
  return data.lang === "id";
});

const projects = allProjects.sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<BaseLayout
  title={`${t("projects.all")} - Hermansyah`}
  description="Koleksi lengkap proyek-proyek yang telah saya kerjakan menggunakan Golang, Python, Rust, dan Laravel."
  lang="id"
>
  <Navigation />

  <main class="pt-24 pb-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h1 class="text-5xl font-bold mb-4 gradient-text">
          {t("projects.all")}
        </h1>
        <p class="text-lg text-zinc-600 dark:text-zinc-400 max-w-2xl mx-auto">
          Koleksi lengkap proyek-proyek yang telah saya kerjakan menggunakan
          berbagai teknologi
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {
          projects.map((project) => (
            <ProjectCard
              title={project.data.title}
              description={project.data.description}
              techStack={project.data.techStack}
              href={`/projects/${project.slug.split("/").pop()}`}
            />
          ))
        }
      </div>

      {
        projects.length === 0 && (
          <div class="text-center py-20">
            <p class="text-zinc-600 dark:text-zinc-400 text-lg">
              Belum ada proyek yang ditampilkan.
            </p>
          </div>
        )
      }
    </div>
  </main>

  <Footer />
</BaseLayout>
